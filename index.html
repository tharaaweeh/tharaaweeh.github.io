<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reading Schedule</title>

<style>
:root{
  --bg:#0b1220;
  --card:#111a2e;
  --border:#1f2a44;
  --accent:#3b82f6;
  --success:#22c55e;
  --text:#e5e7eb;
  --muted:#9ca3af;
}

*{box-sizing:border-box;font-family:Inter,system-ui}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  padding:48px 16px;
}

.container{max-width:960px;margin:auto}

header{margin-bottom:40px}
header h1{margin:0 0 8px;font-size:2.2rem}
header p{margin:0;color:var(--muted)}

.week{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:24px;
  margin-bottom:28px;
}

.week h2{margin-top:0}

.day{
  border:1px solid var(--border);
  border-radius:12px;
  padding:16px;
  margin-bottom:14px;
}

.row{
  display:flex;
  align-items:center;
  gap:14px;
}

.checkbox{
  width:24px;height:24px;
  border-radius:6px;
  background:var(--success);
  display:grid;place-items:center;
}

.checkbox svg{
  width:16px;height:16px;
  stroke:#fff;stroke-width:3;
}

.text{
  flex:1;
  text-decoration:line-through;
  color:var(--muted);
}

.notes-btn{
  background:none;
  border:1px solid var(--border);
  color:var(--text);
  padding:6px 14px;
  border-radius:8px;
  cursor:pointer;
}

.notes-btn:hover{
  border-color:var(--accent);
  color:var(--accent);
}

.notes{
  display:none;
  margin-top:14px;
}

.notes.active{display:block}

.slot{
  background:#0f172a;
  border:1px solid var(--border);
  border-radius:8px;
  padding:10px;
  margin-bottom:10px;
}

.slot textarea{
  width:100%;
  background:none;
  border:none;
  resize:none;
  color:var(--text);
  outline:none;
}
</style>
</head>

<body>
<div class="container">

<header>
  <h1>Reading Schedule</h1>
  <p>Shared notes • Live updates</p>
</header>

<div id="weeks"></div>

</div>

<script type="module">
/* Firebase */
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import {
  getFirestore,
  doc,
  setDoc,
  onSnapshot
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

/* Your Firebase config */
const firebaseConfig = {
  apiKey: "AIzaSyAQyGUzfrQQrksE2uE8cIa3oU9M6MB8-Cw",
  authDomain: "tharaaweeh-zikra.firebaseapp.com",
  projectId: "tharaaweeh-zikra",
  storageBucket: "tharaaweeh-zikra.firebasestorage.app",
  messagingSenderId: "508291079906",
  appId: "1:508291079906:web:445cb25b57136fce00c8bb"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* Schedule data */
const schedule = [
["Week 1",
 "Wednesday – pages 3–6",
 "Thursday – pages 7–10",
 "Friday – pages 11–14",
 "Saturday – pages 15–18",
 "Sunday – pages 19–22",
 "Monday – pages 23–26",
 "Tuesday – pages 27–30"
],
["Week 2",
 "Wednesday – pages 31–34",
 "Thursday – pages 35–38",
 "Friday – pages 39–42",
 "Saturday – pages 43–46",
 "Sunday – pages 47–50",
 "Monday – pages 51–54",
 "Tuesday – pages 55–58"
],
["Week 3",
 "Wednesday – pages 59–62",
 "Thursday – pages 63–66",
 "Friday – pages 67–70",
 "Saturday – pages 71–74",
 "Sunday – pages 75–78",
 "Monday – pages 79–82",
 "Tuesday – pages 83–86"
],
["Week 4",
 "Wednesday – pages 87–90",
 "Thursday – pages 91–94",
 "Friday – pages 95–98",
 "Saturday – pages 99–102",
 "Sunday – pages 103–106",
 "Monday – pages 107–110",
 "Tuesday – pages 111–114"
],
["Week 5",
 "Wednesday – pages 115–118",
 "Thursday – pages 119–122"
]
];

const container = document.getElementById("weeks");
let dayIndex = 0;

/* Render UI */
schedule.forEach(week=>{
  const card=document.createElement("div");
  card.className="week";
  card.innerHTML=`<h2>${week[0]}</h2>`;

  week.slice(1).forEach(text=>{
    const id = dayIndex++;

    const day=document.createElement("div");
    day.className="day";

    day.innerHTML=`
      <div class="row">
        <div class="checkbox">
          <svg viewBox="0 0 24 24" fill="none">
            <polyline points="4 12 9 17 20 6"/>
          </svg>
        </div>
        <div class="text">${text}</div>
        <button class="notes-btn">Notes</button>
      </div>
      <div class="notes">
        ${[0,1,2,3].map(s=>`
          <div class="slot">
            <textarea
              placeholder="Note ${s+1}"
              data-day="${id}"
              data-slot="${s}"></textarea>
          </div>
        `).join("")}
      </div>
    `;

    const notes = day.querySelector(".notes");
    day.querySelector(".notes-btn").onclick =
      ()=>notes.classList.toggle("active");

    const ref = doc(db,"notes",`day_${id}`);

    day.querySelectorAll("textarea").forEach(t=>{
      onSnapshot(ref,snap=>{
        if(!snap.exists()) return;
        t.value = snap.data()[t.dataset.slot] || "";
      });

      t.oninput = ()=>setDoc(
        ref,
        { [t.dataset.slot]: t.value },
        { merge:true }
      );
    });

    card.appendChild(day);
  });

  container.appendChild(card);
});
</script>

</body>
</html>
